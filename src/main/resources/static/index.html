<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title></title>
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0">
	<script src="https://cdn.bootcdn.net/ajax/libs/vue/3.2.41/vue.global.js"></script>
	<script src="https://cdn.bootcdn.net/ajax/libs/vue-router/4.1.5/vue-router.global.js"></script>
	<script src="https://cdn.bootcdn.net/ajax/libs/vuex/4.1.0/vuex.global.js"></script>
	<style>
		body {
			margin: 0;
		}

		html,
		body,
		#app {
			height: 100%;
		}

		*,
		*::before,
		*::after {
			box-sizing: border-box;
		}

		ul {
			padding: 0;
		}

		li {
			list-style-type: none;
		}

		li:hover {
			background: #efecec;
		}
	</style>
</head>

<body>
	<div id="app" v-cloak style="max-width: 500px;border:1px solid black;margin:auto;">
		<router-view></router-view>
	</div>
</body>
<script type="module">

	const routes = [
		{
			path: '/', redirect:'/message', component:() => import('./view/index.js'),
			children: [
				{
					path: "/message", name: "message",  component:() => import('./view/message.js')
				},
				{
					path: "/group", name: "group",  component:() => import('./view/group.js')
				},
				{
					path: "/member", name: "member",  component:() => import('./view/member.js')
				}
			]
		},
		{
			path: "/login", name: "login", component: () => import('./view/login.js')
		},
		{
			path: "/register", name: "register", component: () => import('./view/register.js')
		}
	]

	const router = VueRouter.createRouter({
		history: VueRouter.createWebHashHistory(),
		routes,
	})

	const app = Vue.createApp({})

	let store = Vuex.createStore({
		state: {
			socketLocal: null,
			socketMessage: null,
			socketGroupMap: {},
			messageMap: {}
		},
		mutations:{
			load(){

			}
		}
	})

	router.afterEach((to) => {
		try {
			console.log("afterEach =====================")
		} catch (e) {
			console.log(e)
		}
	})

	app.use(router)
	app.use(store)
	app.mount('#app')
</script>

</html>